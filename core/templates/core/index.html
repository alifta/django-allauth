{% extends 'base.html' %}

{% load socialaccount %}

{% load static %}

{% block title %}Home{% endblock %}

{% block content %}

  <div class="container mx-auto px-4 py-8">
    <!-- Hero Section -->
    <div class="hero min-h-[60vh] bg-base-200 rounded-lg mb-8">
      <div class="hero-content text-center">
        <div class="max-w-md">
          <h1 class="text-5xl font-bold">Home In Block</h1>

          <p class="py-6" id="home-description">
            {% if user.is_authenticated %}
              Welcome back, {{ user.username }}! You're ready to use our
              API.
            {% else %}
              Welcome to our platform. Get started by signing in or explore our products
              below.
            {% endif %}
          </p>

          <div class="flex gap-2 justify-center">
            <a class="btn btn-primary"
               hx-get="{% url 'core:about' %}"
               hx-target="#home-description">About Us</a>

            {% if user.is_authenticated %}
              <button class="btn btn-secondary" onclick="fetchAndStoreToken()">Connect API</button>
              <span id="token-status" class="badge badge-ghost"></span>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <!-- Products Section -->
    <div class="card bg-base-100 shadow-xl mb-8">
      <div class="card-body">
        <h2 class="card-title text-3xl mb-4">Products</h2>

        <div class="overflow-x-auto">
          <table class="table table-zebra w-full" id="product-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>101</td>
                <td>Product A</td>
              </tr>
              <tr>
                <td>102</td>
                <td>Product B</td>
              </tr>
              <tr>
                <td>103</td>
                <td>Product C</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="card-actions justify-end mt-4">
          <button class="btn btn-primary" hx-get="/about">Get more</button>
        </div>

        <form style="margin-top: 24px">
          <label for="product">Product</label>
          <input type="text" name="product" id="product" class="input input-bordered" />
          <input type="submit" value="submit" class="btn btn-primary mt-2" />
        </form>
      </div>
    </div>
  </div>

  {% include 'components/_card.html' %}

{% endblock %}
